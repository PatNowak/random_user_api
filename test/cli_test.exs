defmodule CliTest do
  use ExUnit.Case
  alias RandomUserApi.CLI

  test "get_user_should_return_valid_map" do
    expected_result = %{"cell" => "043-959-84-19", "dob" => 805677838,
      "email" => "aada.halko@example.com", "gender" => "female",
      "id" => [{"name", "HETU"}, {"value", "33120925-F"}],
      "location" => [{"street", "2366 otavalankatu"},
      {"city", "järvenpää"}, {"state", "ostrobothnia"},
      {"postcode", 42346}],
      "login" => [{"username", "heavyduck848"}, {"password", "mother1"},
      {"salt", "wteItuO6"}, {"md5", "0b9ba42c3ce3e6c4d2ae983b68146a03"},
      {"sha1", "0bb31672608fd7e64904abf8d9d7a92e13479e10"},
      {"sha256",
       "c0356a9cc1d9da678e777ec2f78b60e7fd60d66deaf2ab1c156f2f3f8ded397b"}],
      "name" => [{"title", "miss"}, {"first", "aada"},
      {"last", "halko"}], "nat" => "FI", "phone" => "02-835-772",
      "picture" => [{"large",
       "https://randomuser.me/api/portraits/women/38.jpg"},
      {"medium",
       "https://randomuser.me/api/portraits/med/women/38.jpg"},
      {"thumbnail",
       "https://randomuser.me/api/portraits/thumb/women/38.jpg"}],
      "registered" => 1426011307}

    assert CLI.get_user == expected_result
  end

  test "get_users_should_return_valid_list_of_users" do
    expected_result = [%{"cell" => "(263)-710-9427", "dob" => 31304024,
              "email" => "ishara.kusters@example.com", "gender" => "female",
              "id" => [{"name", "BSN"}, {"value", "16627840"}],
              "location" => [{"street", "4053 jutfaseweg"},
               {"city", "hardinxveld-giessendam"}, {"state", "friesland"},
               {"postcode", 65452}],
              "login" => [{"username", "whiteleopard472"},
               {"password", "paladin"}, {"salt", "T2RZsqRw"},
               {"md5", "62589627bfa749af71c1727d1a2323d4"},
               {"sha1", "1482978ad48cce23ca56000d6ff2ee65519193cb"},
               {"sha256",
                "bd30ac655824588e1022efa403c811da0334c3345b28f3bb2b1a7fa8aa36516b"}],
              "name" => [{"title", "mrs"}, {"first", "ishara"},
               {"last", "kusters"}], "nat" => "NL", "phone" => "(935)-804-8781",
              "picture" => [{"large",
                "https://randomuser.me/api/portraits/women/2.jpg"},
               {"medium",
                "https://randomuser.me/api/portraits/med/women/2.jpg"},
               {"thumbnail",
                "https://randomuser.me/api/portraits/thumb/women/2.jpg"}],
              "registered" => 1164017514},
            %{"cell" => "06-41-55-16-46", "dob" => 686755146,
              "email" => "constance.roux@example.com", "gender" => "female",
              "id" => [{"name", "INSEE"}, {"value", "291939669217 03"}],
              "location" => [{"street", "6869 place du 8 février 1962"},
               {"city", "saint-étienne"}, {"state", "loire-atlantique"},
               {"postcode", 93633}],
              "login" => [{"username", "tinykoala359"}, {"password", "newton"},
               {"salt", "Zc8SsliN"},
               {"md5", "8bdac7fc031bd11add2a85ba25872b00"},
               {"sha1", "bce64972142ad59b89842284096f3044cff3d78f"},
               {"sha256",
                "a34123fa13b330b32652dc10542f6ce1355de60e057275f3bc329ab309e15dc8"}],
              "name" => [{"title", "miss"}, {"first", "constance"},
               {"last", "roux"}], "nat" => "FR", "phone" => "03-80-51-46-09",
              "picture" => [{"large",
                "https://randomuser.me/api/portraits/women/66.jpg"},
               {"medium",
                "https://randomuser.me/api/portraits/med/women/66.jpg"},
               {"thumbnail",
                "https://randomuser.me/api/portraits/thumb/women/66.jpg"}],
              "registered" => 1170397893}]


    assert CLI.get_users(2) == expected_result
  end

  test "get_male_should_return_user_map_with_male_gender" do
    expected_result = %{"cell" => "045-021-04-08", "dob" => 736120677,
             "email" => "akseli.nevala@example.com", "gender" => "male",
             "id" => [{"name", "HETU"}, {"value", "72057430-I"}],
             "location" => [{"street", "6669 pirkankatu"}, {"city", "multia"},
              {"state", "north karelia"}, {"postcode", 53326}],
             "login" => [{"username", "blacklion395"}, {"password", "bigbooty"},
              {"salt", "9NYe8Wby"}, {"md5", "aaa42932c031a12b3edea3dd8877d308"},
              {"sha1", "14ce17bdb172051b4e0145b60e8143a9267d72bc"},
              {"sha256",
               "c165f9f5919b4b4942861d9693cc7757d87d1599e9745d326b08fa670970b4e1"}],
             "name" => [{"title", "mr"}, {"first", "akseli"},
              {"last", "nevala"}], "nat" => "FI", "phone" => "04-104-015",
             "picture" => [{"large",
               "https://randomuser.me/api/portraits/men/79.jpg"},
              {"medium", "https://randomuser.me/api/portraits/med/men/79.jpg"},
              {"thumbnail",
               "https://randomuser.me/api/portraits/thumb/men/79.jpg"}],
             "registered" => 1159726218}

    assert CLI.get_male == expected_result
    assert CLI.get_male["gender"] == "male"
  end

  test "get_female_should_return_user_map_with_female_gender" do
    expected_result = %{"cell" => "0498-757-680", "dob" => 1362589514,
             "email" => "crystal.king@example.com", "gender" => "female",
             "id" => [{"name", "TFN"}, {"value", "319237329"}],
             "location" => [{"street", "7996 timber wolf trail"},
              {"city", "orange"}, {"state", "south australia"},
              {"postcode", 3485}],
             "login" => [{"username", "greenkoala674"},
              {"password", "william1"}, {"salt", "itTfDqhC"},
              {"md5", "269fbb1802e0008d3aa7aafa224cfea7"},
              {"sha1", "a5175c85d97d6f1b8d69acb8c381fb5eaf4b54d2"},
              {"sha256",
               "ab99e2482130842dcce87f651353b1bbe607494815a455eb56df5a1384033063"}],
             "name" => [{"title", "miss"}, {"first", "crystal"},
              {"last", "king"}], "nat" => "AU", "phone" => "03-3162-2043",
             "picture" => [{"large",
               "https://randomuser.me/api/portraits/women/81.jpg"},
              {"medium",
               "https://randomuser.me/api/portraits/med/women/81.jpg"},
              {"thumbnail",
               "https://randomuser.me/api/portraits/thumb/women/81.jpg"}],
             "registered" => 1390890982}

    assert CLI.get_female == expected_result
    assert CLI.get_female["gender"] == "female"
  end

  test "get_males_should_return_list_of_users_with_male_gender_for_each" do
    expected_result = [%{"cell" => "06-62-22-47-63", "dob" => 456317223,
              "email" => "alexandre.leroux@example.com", "gender" => "male",
              "id" => [{"name", "INSEE"}, {"value", "184576471206 36"}],
              "location" => [{"street", "8167 quai charles-de-gaulle"},
               {"city", "pau"}, {"state", "haute-vienne"}, {"postcode", 64310}],
              "login" => [{"username", "goldencat213"}, {"password", "leslie"},
               {"salt", "2Ep2EGpU"},
               {"md5", "6ae95d64563786d8811b0e1c4b9b71ff"},
               {"sha1", "a718d0dd0bfbcd8a12173f7867d552b503224d28"},
               {"sha256",
                "d53cb0e22403b8e061546f590686d8ec42738fa6852a2a271c7093bf224f6918"}],
              "name" => [{"title", "mr"}, {"first", "alexandre"},
               {"last", "leroux"}], "nat" => "FR", "phone" => "02-74-57-21-45",
              "picture" => [{"large",
                "https://randomuser.me/api/portraits/men/39.jpg"},
               {"medium", "https://randomuser.me/api/portraits/med/men/39.jpg"},
               {"thumbnail",
                "https://randomuser.me/api/portraits/thumb/men/39.jpg"}],
              "registered" => 1084598512},
            %{"cell" => "(367)-467-1676", "dob" => 1387266257,
              "email" => "ezra.jackson@example.com", "gender" => "male",
              "id" => [{"name", ""}, {"value", :null}],
              "location" => [{"street", "5066 dickens street"},
               {"city", "blenheim"}, {"state", "hawke's bay"},
               {"postcode", 91234}],
              "login" => [{"username", "ticklishsnake931"},
               {"password", "evan"}, {"salt", "Noq2C10q"},
               {"md5", "7904facb79fde37f5450d0f163e399ae"},
               {"sha1", "12b2389b17a7920f8aeef8047ab2a1c06d7e8a4f"},
               {"sha256",
                "81d0b02c28c98b696fb9a6e54ed3065d58c2effb351611bf26b968a3f8b279da"}],
              "name" => [{"title", "mr"}, {"first", "ezra"},
               {"last", "jackson"}], "nat" => "NZ", "phone" => "(971)-614-7560",
              "picture" => [{"large",
                "https://randomuser.me/api/portraits/men/79.jpg"},
               {"medium", "https://randomuser.me/api/portraits/med/men/79.jpg"},
               {"thumbnail",
                "https://randomuser.me/api/portraits/thumb/men/79.jpg"}],
              "registered" => 1413661492},
            %{"cell" => "081-955-3384", "dob" => 1388244305,
              "email" => "isaiah.scott@example.com", "gender" => "male",
              "id" => [{"name", "PPS"}, {"value", "3721251TA"}],
              "location" => [{"street", "6306 station road"},
               {"city", "tralee"}, {"state", "limerick"}, {"postcode", 62131}],
              "login" => [{"username", "smallrabbit121"},
               {"password", "barcelona"}, {"salt", "5UZjzWwi"},
               {"md5", "6c36ffece2efc2d0b73f9da88dd7d802"},
               {"sha1", "b43c65aefc130f79ebda9d3922ac65f44df19707"},
               {"sha256",
                "656bc511b8da3aa43c1a31c47230712e026f42e25768a4f3b49aa5ed2fa725a2"}],
              "name" => [{"title", "mr"}, {"first", "isaiah"},
               {"last", "scott"}], "nat" => "IE", "phone" => "021-102-7552",
              "picture" => [{"large",
                "https://randomuser.me/api/portraits/men/52.jpg"},
               {"medium", "https://randomuser.me/api/portraits/med/men/52.jpg"},
               {"thumbnail",
                "https://randomuser.me/api/portraits/thumb/men/52.jpg"}],
              "registered" => 1061140282}]

    assert CLI.get_males(3) == expected_result
  end
end
